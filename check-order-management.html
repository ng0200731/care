<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check Order Management</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
        }
        .result {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-left: 4px solid #28a745;
            border-radius: 4px;
        }
        .error {
            border-left-color: #dc3545;
        }
        .info {
            border-left-color: #17a2b8;
        }
        pre {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            max-height: 500px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .delete-btn {
            background: #dc3545;
        }
        .delete-btn:hover {
            background: #c82333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Check Order Management Data</h1>

        <button onclick="checkOrderManagement()">1. Check order_management</button>
        <button onclick="showAllKeys()">2. Show All localStorage Keys</button>
        <button onclick="deleteOrderManagement()" class="delete-btn">3. Delete order_management</button>

        <div id="results"></div>
    </div>

    <script>
        function checkOrderManagement() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h2>üîç Checking order_management...</h2>';

            try {
                const orderData = localStorage.getItem('order_management');

                if (!orderData) {
                    resultsDiv.innerHTML += '<div class="result error">‚ùå No data found in localStorage key "order_management"</div>';
                    return;
                }

                const orders = JSON.parse(orderData);
                resultsDiv.innerHTML += '<div class="result" style="background: #d4edda;">‚úÖ Found ' + orders.length + ' order(s) in order_management</div>';

                orders.forEach((order, index) => {
                    resultsDiv.innerHTML += '<div class="result info">';
                    resultsDiv.innerHTML += '<h3>Order ' + (index + 1) + ':</h3>';
                    resultsDiv.innerHTML += '<strong>ID:</strong> ' + order.id + '<br>';
                    resultsDiv.innerHTML += '<strong>Status:</strong> ' + order.status + '<br>';
                    resultsDiv.innerHTML += '<strong>Customer ID:</strong> ' + order.customerId + '<br>';
                    resultsDiv.innerHTML += '<strong>Project Slug:</strong> ' + order.projectSlug + '<br>';
                    resultsDiv.innerHTML += '<strong>Layout ID:</strong> ' + order.layoutId + '<br>';
                    resultsDiv.innerHTML += '<strong>Quantity:</strong> ' + order.quantity + '<br>';
                    resultsDiv.innerHTML += '<strong>Created At:</strong> ' + order.createdAt + '<br>';

                    // Show variable data count
                    const varCount = Object.keys(order.variableData || {}).length;
                    resultsDiv.innerHTML += '<strong>Variable Components:</strong> ' + varCount + '<br>';

                    resultsDiv.innerHTML += '</div>';
                });

                resultsDiv.innerHTML += '<h3>üìã Full JSON Data:</h3>';
                resultsDiv.innerHTML += '<pre>' + JSON.stringify(orders, null, 2) + '</pre>';

            } catch (error) {
                resultsDiv.innerHTML += '<div class="result error">‚ùå Error: ' + error.message + '</div>';
                console.error(error);
            }
        }

        function showAllKeys() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h2>üîç All localStorage Keys</h2>';

            try {
                const allKeys = Object.keys(localStorage);
                resultsDiv.innerHTML += '<div class="result info">Found ' + allKeys.length + ' total localStorage keys</div>';

                const orderKeys = allKeys.filter(key => key.includes('order'));
                if (orderKeys.length > 0) {
                    resultsDiv.innerHTML += '<h3>Keys containing "order":</h3>';
                    orderKeys.forEach(key => {
                        const data = localStorage.getItem(key);
                        resultsDiv.innerHTML += '<div class="result">';
                        resultsDiv.innerHTML += '<strong>Key:</strong> ' + key + '<br>';
                        resultsDiv.innerHTML += '<strong>Size:</strong> ' + data.length + ' characters<br>';
                        resultsDiv.innerHTML += '</div>';
                    });
                }

                resultsDiv.innerHTML += '<h3>All Keys:</h3>';
                resultsDiv.innerHTML += '<pre>' + JSON.stringify(allKeys, null, 2) + '</pre>';

            } catch (error) {
                resultsDiv.innerHTML += '<div class="result error">‚ùå Error: ' + error.message + '</div>';
            }
        }

        function deleteOrderManagement() {
            if (confirm('‚ö†Ô∏è Are you sure you want to DELETE all order_management data?')) {
                localStorage.removeItem('order_management');
                document.getElementById('results').innerHTML = '<div class="result" style="background: #fff3cd; border-left-color: #ffc107;">üóëÔ∏è order_management deleted from localStorage</div>';
            }
        }
    </script>
</body>
</html>
